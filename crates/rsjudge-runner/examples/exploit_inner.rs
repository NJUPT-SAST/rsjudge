use caps::{read, CapSet};
use nix::unistd::{setuid, Uid};

fn main() {
    dbg!(read(None, CapSet::Ambient).unwrap());
    dbg!(read(None, CapSet::Effective).unwrap());
    dbg!(read(None, CapSet::Inheritable).unwrap());
    dbg!(read(None, CapSet::Permitted).unwrap());
    eprintln!("Starting setuid syscall.");
    let result = setuid(Uid::from_raw(0)).expect_err("Should fail to set UID");
    dbg!(result.desc());
    dbg!(read(None, CapSet::Permitted).unwrap());
    eprintln!("Failed calling setuid, test pass.");
}
